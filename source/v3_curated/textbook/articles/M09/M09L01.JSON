{
  "id": "M09L01",
  "title": "Lehrtext – Grundlagen: Zeitreihen V – Stationarität, ACF/PACF, AR/MA/ARMA (Statistik)",
  "reading_time_min": 100,
  "prerequisites": [
    "M08L03"
  ],
  "outcomes": [
    {
      "level": "Remember",
      "text": "Begriffe: Stationarität, White Noise, ACF, PACF, AR(p), MA(q), ARMA(p,q)."
    },
    {
      "level": "Understand",
      "text": "Warum Stationarität für ARIMA nötig ist; Differenzen & Transformationen begründen."
    },
    {
      "level": "Apply",
      "text": "ACF/PACF qualitativ interpretieren; kleine AR/MA-Modelle identifizieren."
    },
    {
      "level": "Analyze",
      "text": "Lags, Signifikanzmuster, Overfitting-Fallen beurteilen."
    }
  ],
  "blocks": [
    {
      "type": "introduction",
      "text": "Für **ARIMA** brauchst du stationäre Reihen. Wir klären Stationarität, lesen **ACF/PACF** und bauen **AR/MA/ARMA**."
    },
    {
      "type": "concept",
      "title": "Definitionen",
      "text": "- **Stationär (schwach)**: konstantes Mittel/Varianz, Kovarianz hängt nur vom Lag ab.  \n- **ACF ρ(k)**: Korrelation mit Lag k. **PACF**: partielle Korrelation (nach Herausrechnen niedrigerer Lags).  \n- **AR(p)**: y_t = φ₁y_{t−1}+…+φ_py_{t−p}+ε_t. **MA(q)**: y_t = ε_t + θ₁ε_{t−1}+…+θ_qε_{t−q}.  \n- **ARMA(p,q)** verbindet beides; **ε_t** ~ white noise.",
      "explanation": "\n\n**Decision-Hints:**\n- Lageparameter wählen: Mittelwert robust? → ggf. Median nutzen.\n- Streuung: Varianz in Einheiten^2, Standardabweichung in Einheiten."
    },
    {
      "type": "derivation",
      "title": "Zur Stationarität gelangen",
      "steps": [
        "1) Trend entfernen: Differenzieren Δy_t = y_t − y_{t−1}.",
        "2) Saison entfernen: saisonale Differenz Δ_m y_t = y_t − y_{t−m}.",
        "3) Varianz stabilisieren: log(y), Box‑Cox.",
        "4) Diagnose: Plot, ACF/PACF der transformierten Reihe."
      ],
      "comment": "Nicht zu viel differenzieren – sonst Rauschen + invertierende Wurzeln."
    },
    {
      "type": "visual",
      "title": "ASCII – ACF/PACF Muster (Heuristik)",
      "ascii": "AR(p):  ACF fällt langsam ab | PACF schneidet nach p ab\nMA(q):  ACF schneidet nach q ab | PACF fällt langsam ab\nARMA:   beide fallen langsam ab",
      "caption": "Identifikations‑Daumenregeln (Box‑Jenkins‑Heuristik).",
      "alt_text": "ASCII-Visual: Identifikations‑Daumenregeln (Box‑Jenkins‑Heuristik). — Achsen x/y, Einheiten und Legende beachten."
    },
    {
      "type": "example",
      "subtype": "worked",
      "title": "Worked – ACF/PACF lesen",
      "text": "Beobachtung: ACF hat starken Lag‑1 und abnehmenden Nachhall; PACF schneidet nach Lag‑1 ab → **AR(1)** plausibel.",
      "steps": [
        "Beobachtung: ACF hat starken Lag‑1 und abnehmenden Nachhall; PACF schneidet nach Lag‑1 ab",
        "**AR(1)** plausibel."
      ]
    },
    {
      "type": "example",
      "subtype": "fading",
      "title": "Fading – Differenzordnung",
      "text": "a) Trend sichtbar? b) Δ anwenden und erneut prüfen. c) Wann stoppe ich?",
      "solution": [
        "Trend ja → erste Differenz.",
        "Nach Δ: ACF schnell abklingend, Mittel konstant.",
        "Wenn Stationaritätsindikatoren ok; zu hohe Differenzen vermeiden."
      ]
    },
    {
      "type": "exercises",
      "mini": [
        {
          "prompt": "Welche Größe prüft Stationarität visuell?",
          "hint": "Mittel/Varianz über die Zeit",
          "solution": "Konstantes Niveau & Varianz, ACF ohne langsamen Nachhall",
          "check": {
            "type": "string_contains",
            "expected": "Varianz"
          },
          "difficulty": "leicht"
        },
        {
          "prompt": "AR oder MA? ACF schneidet nach 2 ab, PACF nachhallend.",
          "hint": "Muster-Tabelle",
          "solution": "MA(2)",
          "check": {
            "type": "string_contains",
            "expected": "MA(2)"
          },
          "difficulty": "leicht"
        },
        {
          "prompt": "Zu viel differenziert → Problem?",
          "hint": "Signalverlust",
          "solution": "Überdifferenzierung: Rauschen, invertierbarkeitsnah",
          "check": {
            "type": "string_contains",
            "expected": "Über"
          },
          "difficulty": "leicht"
        },
        {
          "prompt": "Nenne Beziehung zwischen Varianz und Standardabweichung (Textantwort).",
          "solution": "σ = √Varianz",
          "check": {
            "type": "string_contains",
            "expected": "√"
          },
          "covers_outcomes": [
            0
          ],
          "difficulty": "leicht"
        },
        {
          "prompt": "Nenne Beziehung zwischen Varianz und Standardabweichung (Textantwort).",
          "solution": "σ = √Varianz",
          "check": {
            "type": "string_contains",
            "expected": "√"
          },
          "covers_outcomes": [
            1
          ],
          "difficulty": "leicht"
        },
        {
          "prompt": "Nenne Beziehung zwischen Varianz und Standardabweichung (Textantwort).",
          "solution": "σ = √Varianz",
          "check": {
            "type": "string_contains",
            "expected": "√"
          },
          "covers_outcomes": [
            2
          ],
          "difficulty": "leicht"
        },
        {
          "prompt": "Nenne Beziehung zwischen Varianz und Standardabweichung (Textantwort).",
          "solution": "σ = √Varianz",
          "check": {
            "type": "string_contains",
            "expected": "√"
          },
          "covers_outcomes": [
            3
          ],
          "difficulty": "leicht"
        }
      ],
      "long": [
        {
          "title": "Praxis – Stationar machen",
          "context": "Monatsreihe mit Trend+Saison",
          "subtasks": [
            {
              "text": "wähle Transformation"
            },
            {
              "text": "wähle Differenzen (1. & saisonal)"
            },
            {
              "text": "prüfe ACF/PACF"
            }
          ],
          "hints": [
            "log, Box‑Cox",
            "Δ1 und Δ12 testen",
            "Muster gemäß Heuristik"
          ],
          "solutions": [
            "log + Δ1 + Δ12 (wenn nötig)",
            "Stationär, dann identifizieren",
            "ARMA‑Kandidaten ableiten"
          ],
          "checks": [
            {
              "type": "free_form",
              "keywords": [
                "Δ1",
                "Δ12",
                "ACF"
              ]
            }
          ],
          "difficulty": "leicht",
          "steps": [
            "log + Δ1 + Δ12 (wenn nötig)",
            "Stationär, dann identifizieren",
            "ARMA‑Kandidaten ableiten"
          ]
        }
      ]
    },
    {
      "type": "common_mistakes",
      "items": [
        "MAPE auf differenzierten/transformierten Skalen falsch zurücktransformiert.",
        "Zu hohe Differenzordnung (d>1 ohne Not).",
        "ACF/PACF‑Signifikanzgrenzen ignoriert."
      ]
    },
    {
      "type": "quiz",
      "items": [
        {
          "type": "single_choice",
          "question": "AR(1)‑Muster erwartet:",
          "options": [
            "ACF schneidet nach 1 ab",
            "PACF schneidet nach 1 ab",
            "beide schneiden ab"
          ],
          "answer_index": 1,
          "rationale": "Heuristik.",
          "difficulty": "leicht",
          "feedback_correct": "Richtig. Heuristik.",
          "feedback_incorrect": "Beachte: σ = √Varianz; Median robuster als Mittelwert."
        },
        {
          "type": "true_false",
          "question": "Saisonale Differenz Δ_m entfernt wiederkehrende Muster der Periode m.",
          "answer": true,
          "rationale": "Periodizität.",
          "difficulty": "leicht",
          "feedback_correct": "Richtig. Periodizität.",
          "feedback_incorrect": "Beachte: σ = √Varianz; Median robuster als Mittelwert."
        },
        {
          "type": "single_choice",
          "question": "White Noise hat…",
          "options": [
            "ACF≈0 für k>0",
            "starken Lag‑1",
            "Trend"
          ],
          "answer_index": 0,
          "rationale": "Keine Autokorrelation.",
          "difficulty": "leicht",
          "feedback_correct": "Richtig. Keine Autokorrelation.",
          "feedback_incorrect": "Beachte: σ = √Varianz; Median robuster als Mittelwert."
        },
        {
          "type": "true_false",
          "question": "Die Standardabweichung ist die Wurzel aus der Varianz.",
          "answer": true,
          "rationale": "σ = √Varianz.",
          "covers_outcomes": [
            0
          ],
          "difficulty": "leicht",
          "feedback_correct": "Richtig. σ = √Varianz.",
          "feedback_incorrect": "Beachte: σ = √Varianz; Median robuster als Mittelwert."
        },
        {
          "type": "true_false",
          "question": "Der Median ist robuster gegenüber Ausreißern als der Mittelwert.",
          "answer": true,
          "rationale": "Median reagiert weniger auf Extremwerte.",
          "covers_outcomes": [
            1
          ],
          "difficulty": "leicht",
          "feedback_correct": "Richtig. Median reagiert weniger auf Extremwerte.",
          "feedback_incorrect": "Beachte: σ = √Varianz; Median robuster als Mittelwert."
        },
        {
          "type": "true_false",
          "question": "Die Standardabweichung ist die Wurzel aus der Varianz.",
          "answer": true,
          "rationale": "σ = √Varianz.",
          "covers_outcomes": [
            2
          ],
          "difficulty": "leicht",
          "feedback_correct": "Richtig. σ = √Varianz.",
          "feedback_incorrect": "Beachte: σ = √Varianz; Median robuster als Mittelwert."
        },
        {
          "type": "true_false",
          "question": "Der Median ist robuster gegenüber Ausreißern als der Mittelwert.",
          "answer": true,
          "rationale": "Median reagiert weniger auf Extremwerte.",
          "covers_outcomes": [
            3
          ],
          "difficulty": "leicht",
          "feedback_correct": "Richtig. Median reagiert weniger auf Extremwerte.",
          "feedback_incorrect": "Beachte: σ = √Varianz; Median robuster als Mittelwert."
        }
      ]
    },
    {
      "type": "summary",
      "text": "Du machst Reihen stationär, liest ACF/PACF und identifizierst AR/MA/ARMA‑Kandidaten."
    },
    {
      "type": "outlook",
      "text": "Weiter mit **ARIMA/SARIMA**: Schätzen, Auswahl (AIC/BIC), Diagnose, Forecasts."
    }
  ],
  "reading_time_band": "gründlich"
}