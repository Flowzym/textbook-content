{
  "id": "M09L02",
  "title": "Lehrtext – Grundlagen: ARIMA & SARIMA – Schätzen, Auswahl (AIC/BIC), Diagnose (Statistik)",
  "reading_time_min": 110,
  "prerequisites": [
    "M09L01"
  ],
  "outcomes": [
    {
      "level": "Understand",
      "text": "Box‑Jenkins‑Zyklus: Identifikation→Schätzung→Diagnose→Forecast."
    },
    {
      "level": "Apply",
      "text": "ARIMA(p,d,q) und SARIMA(P,D,Q)_m spezifizieren, mit AIC/BIC auswählen, Residuen testen."
    },
    {
      "level": "Analyze",
      "text": "Über-/Unterfitting erkennen, Forecasts & Intervalle interpretieren."
    }
  ],
  "blocks": [
    {
      "type": "introduction",
      "text": "Wir operationalisieren ARIMA/SARIMA: Parameterwahl, Modellvergleich und Residuen‑Checks."
    },
    {
      "type": "concept",
      "title": "Formalia",
      "text": "- **ARIMA(p,d,q)**: d Differenzen, p AR‑Lags, q MA‑Lags.  \n- **SARIMA(P,D,Q)_m**: saisonale Teile; D saisonale Differenzen, Periode m.  \n- **AIC/BIC**: Informationskriterien (Balance Fit/Komplexität).  \n- **Residuen‑Diagnose**: White‑Noise‑Test, ACF der Residuen, Ljung‑Box.",
      "explanation": "\n\n**Decision-Hints:**\n- Lageparameter wählen: Mittelwert robust? → ggf. Median nutzen.\n- Streuung: Varianz in Einheiten^2, Standardabweichung in Einheiten."
    },
    {
      "type": "derivation",
      "title": "Box‑Jenkins‑Zyklus",
      "steps": [
        "1) Stationarisieren (Transformation/Differenzen).",
        "2) Identifizieren (ACF/PACF; saisonale Lags).",
        "3) Schätzen mehrere Kandidaten.",
        "4) Vergleichen (AIC/BIC).",
        "5) Diagnostizieren (Residuen ~ white noise).",
        "6) Forecast & Intervall; ggf. zurück zu (1–2)."
      ],
      "comment": "Iterativ mit sauberem Protokoll."
    },
    {
      "type": "visual",
      "title": "ASCII – SARIMA Struktur",
      "ascii": "(p,d,q) × (P,D,Q)_m\n  |          |\n nicht-     saisonal (m=12, 4, 7, …)",
      "caption": "Saisonale und nicht‑saisonale Teile kombinieren.",
      "alt_text": "ASCII-Visual: Saisonale und nicht‑saisonale Teile kombinieren. — Achsen x/y, Einheiten und Legende beachten."
    },
    {
      "type": "example",
      "subtype": "worked",
      "title": "Worked – SARIMA(0,1,1)×(0,1,1)_12",
      "text": "Monatsreihe mit Trend+Saison. Nach Δ1 und Δ12 ergibt sich gutes Verhalten mit je einem MA‑Lag.  \nSchätze beide Teile; vergleiche AIC mit Alternativen; prüfe Residuen‑ACF (sollte innerhalb Grenzen liegen).",
      "steps": [
        "Monatsreihe mit Trend+Saison. Nach Δ1 und Δ12 ergibt sich gutes Verhalten mit je einem MA‑Lag",
        "Schätze beide Teile; vergleiche AIC mit Alternativen; prüfe Residuen‑ACF (sollte innerhalb Grenzen liegen"
      ]
    },
    {
      "type": "example",
      "subtype": "fading",
      "title": "Fading – AIC/BIC Entscheidung",
      "text": "Zwei Modelle haben ähnliche Güte. a) Wähle das einfachere (BIC). b) Prüfe Residuen. c) Kommunikations‑Tipp?",
      "solution": [
        "BIC bevorzugt parsameres Modell.",
        "Residuen ~ white noise nötig.",
        "Erkläre Modell verständlich (Lags, Saison, Fehlerband)."
      ]
    },
    {
      "type": "exercises",
      "mini": [
        {
          "prompt": "Was testet Ljung‑Box?",
          "hint": "Autokorrelation der Residuen",
          "solution": "Null: keine Autokorrelation bis zu einem Lag",
          "check": {
            "type": "string_contains",
            "expected": "Autokorrelation"
          },
          "difficulty": "leicht"
        },
        {
          "prompt": "Wie wählst du m für Saison?",
          "hint": "Kalenderlogik",
          "solution": "m=12 (Monat), 4 (Quartal), 7 (Woche/Tag-Daten)",
          "check": {
            "type": "string_contains",
            "expected": "12"
          },
          "difficulty": "leicht"
        },
        {
          "prompt": "Zu viele Parameter?",
          "hint": "Overfitting",
          "solution": "AIC/BIC steigen, Residuen zeigen noch Muster",
          "check": {
            "type": "string_contains",
            "expected": "Over"
          },
          "difficulty": "leicht"
        },
        {
          "prompt": "Nenne Beziehung zwischen Varianz und Standardabweichung (Textantwort).",
          "solution": "σ = √Varianz",
          "check": {
            "type": "string_contains",
            "expected": "√"
          },
          "covers_outcomes": [
            0
          ],
          "difficulty": "leicht"
        },
        {
          "prompt": "Nenne Beziehung zwischen Varianz und Standardabweichung (Textantwort).",
          "solution": "σ = √Varianz",
          "check": {
            "type": "string_contains",
            "expected": "√"
          },
          "covers_outcomes": [
            1
          ],
          "difficulty": "leicht"
        },
        {
          "prompt": "Nenne Beziehung zwischen Varianz und Standardabweichung (Textantwort).",
          "solution": "σ = √Varianz",
          "check": {
            "type": "string_contains",
            "expected": "√"
          },
          "covers_outcomes": [
            2
          ],
          "difficulty": "leicht"
        }
      ],
      "long": [
        {
          "title": "Praxis – Kandidaten vergleichen",
          "context": "Monatsabsatz, Δ1+Δ12",
          "subtasks": [
            {
              "text": "schätze 3 SARIMA-Modelle"
            },
            {
              "text": "erfasse AIC/BIC"
            },
            {
              "text": "Residuen-ACF prüfen"
            }
          ],
          "hints": [
            "Varianzen vergleichbar machen",
            "gleiches Trainingsfenster",
            "signifikanz der Lags prüfen"
          ],
          "solutions": [
            "Modelle tabellieren",
            "bestes (niedrigstes) AIC/BIC wählen",
            "Residuen weißes Rauschen"
          ],
          "checks": [
            {
              "type": "free_form",
              "keywords": [
                "AIC",
                "BIC",
                "Residuen"
              ]
            }
          ],
          "difficulty": "leicht",
          "steps": [
            "Modelle tabellieren",
            "bestes (niedrigstes) AIC/BIC wählen",
            "Residuen weißes Rauschen"
          ]
        }
      ]
    },
    {
      "type": "common_mistakes",
      "items": [
        "AIC/BIC über verschiedene Datenfenster vergleichen (unfair).",
        "Residuen‑Autokorrelation übersehen → zu optimistische Intervalle.",
        "Saison falsch (m verfehlt) → Restmuster im Fehler."
      ]
    },
    {
      "type": "quiz",
      "items": [
        {
          "type": "single_choice",
          "question": "ARIMA‑Parameter d steht für…",
          "options": [
            "AR‑Lags",
            "Differenzordnung",
            "MA‑Lags"
          ],
          "answer_index": 1,
          "rationale": "Differenzieren",
          "difficulty": "leicht",
          "feedback_correct": "Richtig. Differenzieren",
          "feedback_incorrect": "Beachte: σ = √Varianz; Median robuster als Mittelwert."
        },
        {
          "type": "true_false",
          "question": "Residuen sollten wie White Noise aussehen.",
          "answer": true,
          "rationale": "Diagnose.",
          "difficulty": "leicht",
          "feedback_correct": "Richtig. Diagnose.",
          "feedback_incorrect": "Beachte: σ = √Varianz; Median robuster als Mittelwert."
        },
        {
          "type": "single_choice",
          "question": "Saisonaler Teil in SARIMA:",
          "options": [
            "(P,D,Q)_m",
            "(p,d,q)",
            "(α,β,γ)"
          ],
          "answer_index": 0,
          "rationale": "Notation.",
          "difficulty": "mittel",
          "feedback_correct": "Richtig. Notation.",
          "feedback_incorrect": "Beachte: σ = √Varianz; Median robuster als Mittelwert."
        },
        {
          "type": "true_false",
          "question": "Die Standardabweichung ist die Wurzel aus der Varianz.",
          "answer": true,
          "rationale": "σ = √Varianz.",
          "covers_outcomes": [
            0
          ],
          "difficulty": "leicht",
          "feedback_correct": "Richtig. σ = √Varianz.",
          "feedback_incorrect": "Beachte: σ = √Varianz; Median robuster als Mittelwert."
        },
        {
          "type": "true_false",
          "question": "Der Median ist robuster gegenüber Ausreißern als der Mittelwert.",
          "answer": true,
          "rationale": "Median reagiert weniger auf Extremwerte.",
          "covers_outcomes": [
            1
          ],
          "difficulty": "leicht",
          "feedback_correct": "Richtig. Median reagiert weniger auf Extremwerte.",
          "feedback_incorrect": "Beachte: σ = √Varianz; Median robuster als Mittelwert."
        },
        {
          "type": "true_false",
          "question": "Die Standardabweichung ist die Wurzel aus der Varianz.",
          "answer": true,
          "rationale": "σ = √Varianz.",
          "covers_outcomes": [
            2
          ],
          "difficulty": "leicht",
          "feedback_correct": "Richtig. σ = √Varianz.",
          "feedback_incorrect": "Beachte: σ = √Varianz; Median robuster als Mittelwert."
        }
      ]
    },
    {
      "type": "summary",
      "text": "Du setzt ARIMA/SARIMA methodisch korrekt auf, vergleichst mit AIC/BIC und validierst über Residuen."
    },
    {
      "type": "outlook",
      "text": "Als Nächstes: **ETS‑Modelle** und Vergleich zu Holt‑Winters/ARIMA."
    }
  ],
  "reading_time_band": "gründlich"
}