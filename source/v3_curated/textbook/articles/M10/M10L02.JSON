{
  "id": "M10L02",
  "title": "Lehrtext – Grundlagen: Bayesianische Grundlagen – Prior, Likelihood, Posterior & Credible Intervals (Gleichungen)",
  "reading_time_min": 100,
  "prerequisites": [
    "M10L01"
  ],
  "outcomes": [
    {
      "level": "Remember",
      "text": "Bayes‑Formel, Prior/Priorwahl, Likelihood, Posterior, Credible Interval."
    },
    {
      "level": "Understand",
      "text": "Unterschied Konfidenz‑ vs. Credible‑Intervall; Rolle von Vorwissen."
    },
    {
      "level": "Apply",
      "text": "Einfache bayes. Modelle (Beta‑Binomial, Normal‑Normal) rechnen/interpretieren."
    },
    {
      "level": "Analyze",
      "text": "Hierarchische Priors skizzieren und Nutzen für Filial‑/SKU‑Pooling erklären."
    }
  ],
  "blocks": [
    {
      "type": "introduction",
      "text": "Bayesianische Statistik integriert **Vorwissen (Prior)** mit **Daten (Likelihood)** zu **Posterior**. \nFür Forecasting und Kausalfragen liefert sie **Credible Intervals** mit direkter Wahrscheinlichkeitsbedeutung."
    },
    {
      "type": "concept",
      "title": "Bayes‑Formel & Intuition",
      "text": "Posterior ∝ Likelihood × Prior.  \n- **Prior**: Glaube vor den Daten (z. B. Promo‑Lift meist 5–15%).  \n- **Likelihood**: Daten‑Wahrscheinlichkeit gegeben Parameter.  \n- **Posterior**: aktualisiertes Wissen nach Beobachtung.  \n- **Credible Interval (95%)**: Bereich, in dem der **Parameter** mit 95% posteriorer Wahrscheinlichkeit liegt.",
      "explanation": "\n\n**Decision-Hints:**\n- Lineare Gleichungen isolieren: gleiche Operation auf beiden Seiten.\n- Klammern zuerst auflösen, dann nach x umstellen."
    },
    {
      "type": "derivation",
      "title": "Conjugate Beispiele – Schritt für Schritt",
      "steps": [
        "1) **Beta‑Binomial** (Anteil): Prior Beta(a,b) + Daten x~Bin(n,θ) → Posterior Beta(a+x,b+n−x).",
        "2) **Normal‑Normal** (Mittel mit bekannter Varianz): Prior N(μ₀,σ₀²) + Daten ̄y → Posterior N(μ_post,σ_post²) mit Gewichten nach Präzision."
      ],
      "comment": "Konjugation ermöglicht Kopfrechnen/Excel‑Lösungen ohne MCMC."
    },
    {
      "type": "visual",
      "title": "ASCII – Prior→Posterior",
      "ascii": "Dichte ^         Posterior\n      |  Prior  /\\\n      |        /  \\__      Likelihood\n      |       /      \\_    /\\\n      +-------------------------→ θ",
      "caption": "Daten schieben den Prior Richtung Likelihood (kompromissgewichtet).",
      "alt_text": "ASCII-Visual: Daten schieben den Prior Richtung Likelihood (kompromissgewichtet). — Achsen x/y, Einheiten und Legende beachten."
    },
    {
      "type": "example",
      "subtype": "worked",
      "title": "Worked – Beta‑Binomial (Conversion‑Rate)",
      "text": "Prior Beta(α=2,β=8) (Erwartung 20%). Beobachtung: x=18 Conversions bei n=80 (22,5%).  \nPosterior: Beta(20,68). 95%‑Credible ca. [0,15; 0,30] (Daumenwert). Interpretation: ‚Wahre‘ Rate liegt mit 95% Wahrscheinlichkeit im Intervall.",
      "steps": [
        "Prior Beta(α=2,β=8) (Erwartung 20%). Beobachtung: x=18 Conversions bei n=80 (22,5%",
        "Posterior: Beta(20,68). 95%‑Credible ca. [0,15; 0,30] (Daumenwert). Interpretation: ‚Wahre‘ Rate liegt mit 95% Wahrscheinlichkeit im Intervall"
      ]
    },
    {
      "type": "example",
      "subtype": "fading",
      "title": "Fading – Hierarchischer Prior (Filial‑Pooling)",
      "text": "50 Filialen mit wenig Daten je Filiale. a) Warum hierarchisch? b) Wie hilft das gegen Überstreuung?",
      "solution": [
        "‚Partial Pooling‘: Filialeffekte ziehen zum Gesamtmittel → stabilere Schätzungen.",
        "Extremwerte schrumpfen; bessere Prognosen für kleine Stichproben."
      ]
    },
    {
      "type": "exercises",
      "mini": [
        {
          "prompt": "Was kombiniert Bayes?",
          "hint": "Prior×Likelihood",
          "solution": "Posterior ∝ Likelihood×Prior",
          "check": {
            "type": "string_contains",
            "expected": "Posterior"
          },
          "difficulty": "leicht"
        },
        {
          "prompt": "95% Credible vs. Konfidenz?",
          "hint": "Parameterwahrscheinlichkeit vs. Verfahren über Stichproben",
          "solution": "Credible: P(θ im Intervall|Daten)=0,95",
          "check": {
            "type": "string_contains",
            "expected": "0,95"
          },
          "difficulty": "leicht",
          "steps": [
            "Parameterwahrscheinlichkeit vs.",
            "Verfahren über Stichproben"
          ]
        },
        {
          "prompt": "Wann Hierarchie nützlich?",
          "hint": "viele Einheiten, wenige Daten je Einheit",
          "solution": "Shrinkage",
          "check": {
            "type": "string_contains",
            "expected": "Pooling"
          },
          "difficulty": "leicht"
        },
        {
          "prompt": "Nenne den Grundsatz zum Lösen linearer Gleichungen (Textantwort).",
          "solution": "Äquivalenzumformungen: gleiche Operation auf beiden Seiten",
          "check": {
            "type": "string_contains",
            "expected": "Operation"
          },
          "covers_outcomes": [
            0
          ],
          "difficulty": "leicht"
        },
        {
          "prompt": "Nenne den Grundsatz zum Lösen linearer Gleichungen (Textantwort).",
          "solution": "Äquivalenzumformungen: gleiche Operation auf beiden Seiten",
          "check": {
            "type": "string_contains",
            "expected": "Operation"
          },
          "covers_outcomes": [
            1
          ],
          "difficulty": "leicht"
        },
        {
          "prompt": "Nenne den Grundsatz zum Lösen linearer Gleichungen (Textantwort).",
          "solution": "Äquivalenzumformungen: gleiche Operation auf beiden Seiten",
          "check": {
            "type": "string_contains",
            "expected": "Operation"
          },
          "covers_outcomes": [
            2
          ],
          "difficulty": "leicht"
        },
        {
          "prompt": "Nenne den Grundsatz zum Lösen linearer Gleichungen (Textantwort).",
          "solution": "Äquivalenzumformungen: gleiche Operation auf beiden Seiten",
          "check": {
            "type": "string_contains",
            "expected": "Operation"
          },
          "covers_outcomes": [
            3
          ],
          "difficulty": "leicht"
        }
      ],
      "long": [
        {
          "title": "Praxis – Promo‑Lift mit Vorwissen",
          "context": "Manager erwartet 5–15% Lift (Prior). Beobachtung: 8 Wochen, gemessener Mittel‑Lift 12% (SE≈4%).",
          "subtasks": [
            {
              "text": "Formuliere einen informativen Normal‑Prior auf Lift."
            },
            {
              "text": "Kombiniere mit Likelihood, gib posterioren Mittelwert/Unsicherheit an."
            },
            {
              "text": "Interpretiere 95% Credible Interval für Entscheidung (Go/No‑Go)."
            }
          ],
          "hints": [
            "μ₀≈10%, σ₀≈5% als Start.",
            "Gewichtete Mittelung nach Präzision.",
            "Go, wenn Intervall klar >0 und ROI‑Schwelle erfüllt."
          ],
          "solutions": [
            "Prior klar",
            "Posterior berechnet",
            "Entscheidung begründet"
          ],
          "checks": [
            {
              "type": "free_form",
              "keywords": [
                "Prior",
                "Posterior",
                "Credible"
              ]
            }
          ],
          "difficulty": "leicht",
          "steps": [
            "Prior klar",
            "Posterior berechnet",
            "Entscheidung begründet"
          ]
        }
      ]
    },
    {
      "type": "common_mistakes",
      "items": [
        "Credible Interval wie Frequentist‑KI interpretiert (falsch herum).",
        "Vaguen Prior mit zu starker Aussagekraft (falsches σ₀).",
        "Hierarchie ignoriert → Überschätzung kleiner Einheiten."
      ]
    },
    {
      "type": "quiz",
      "items": [
        {
          "type": "single_choice",
          "question": "Posterior ist proportional zu…",
          "options": [
            "Prior×Likelihood",
            "Prior−Likelihood",
            "Likelihood/Prior"
          ],
          "answer_index": 0,
          "rationale": "Bayes.",
          "difficulty": "leicht",
          "feedback_correct": "Richtig. Bayes.",
          "feedback_incorrect": "Beachte: Äquivalenzumformungen: gleiche Operation beidseitig; Punkt-vor-Strich beachten."
        },
        {
          "type": "true_false",
          "question": "Credible Intervall bezieht sich direkt auf die Parameterunsicherheit.",
          "answer": true,
          "rationale": "Bayesianische Interpretation.",
          "difficulty": "leicht",
          "feedback_correct": "Richtig. Bayesianische Interpretation.",
          "feedback_incorrect": "Beachte: Äquivalenzumformungen: gleiche Operation beidseitig; Punkt-vor-Strich beachten."
        },
        {
          "type": "single_choice",
          "question": "Hierarchische Modelle bewirken…",
          "options": [
            "kein Effekt",
            "Pooling/Shrinkage",
            "höhere Varianz"
          ],
          "answer_index": 1,
          "rationale": "Stabilisierung.",
          "difficulty": "leicht",
          "feedback_correct": "Richtig. Stabilisierung.",
          "feedback_incorrect": "Beachte: Äquivalenzumformungen: gleiche Operation beidseitig; Punkt-vor-Strich beachten."
        },
        {
          "type": "true_false",
          "question": "Lineare Gleichungen löst man durch dieselbe Operation auf beiden Seiten.",
          "answer": true,
          "rationale": "Äquivalenzumformungen: gleicher Schritt links und rechts.",
          "covers_outcomes": [
            0
          ],
          "difficulty": "leicht",
          "feedback_correct": "Richtig. Äquivalenzumformungen: gleicher Schritt links und rechts.",
          "feedback_incorrect": "Beachte: Äquivalenzumformungen: gleiche Operation beidseitig; Punkt-vor-Strich beachten."
        },
        {
          "type": "true_false",
          "question": "Beim Umstellen kommt die Punkt-vor-Strich-Regel nicht zum Tragen.",
          "answer": false,
          "rationale": "Zuerst Klammern auflösen, Punkt-vor-Strich beachten.",
          "covers_outcomes": [
            1
          ],
          "difficulty": "leicht",
          "feedback_correct": "Richtig. Zuerst Klammern auflösen, Punkt-vor-Strich beachten.",
          "feedback_incorrect": "Beachte: Äquivalenzumformungen: gleiche Operation beidseitig; Punkt-vor-Strich beachten."
        },
        {
          "type": "true_false",
          "question": "Lineare Gleichungen löst man durch dieselbe Operation auf beiden Seiten.",
          "answer": true,
          "rationale": "Äquivalenzumformungen: gleicher Schritt links und rechts.",
          "covers_outcomes": [
            2
          ],
          "difficulty": "leicht",
          "feedback_correct": "Richtig. Äquivalenzumformungen: gleicher Schritt links und rechts.",
          "feedback_incorrect": "Beachte: Äquivalenzumformungen: gleiche Operation beidseitig; Punkt-vor-Strich beachten."
        },
        {
          "type": "true_false",
          "question": "Beim Umstellen kommt die Punkt-vor-Strich-Regel nicht zum Tragen.",
          "answer": false,
          "rationale": "Zuerst Klammern auflösen, Punkt-vor-Strich beachten.",
          "covers_outcomes": [
            3
          ],
          "difficulty": "leicht",
          "feedback_correct": "Richtig. Zuerst Klammern auflösen, Punkt-vor-Strich beachten.",
          "feedback_incorrect": "Beachte: Äquivalenzumformungen: gleiche Operation beidseitig; Punkt-vor-Strich beachten."
        }
      ]
    },
    {
      "type": "summary",
      "text": "Du beherrschst Prior→Posterior, Credible Intervals und den Nutzen hierarchischer Modelle."
    },
    {
      "type": "outlook",
      "text": "Als Nächstes: **Causal Impact mit strukturellen Zeitreihen** (BSTS) – kausale Effekte ohne klare Control‑Gruppe."
    }
  ],
  "reading_time_band": "gründlich"
}