{
  "id": "M06L03",
  "title": "Lehrtext – Grundlagen: Lineare Optimierung III – Dualität, Schattenpreise & Sensitivität (Rabatt/Skonto)",
  "reading_time_min": 88,
  "prerequisites": [
    "M06L02"
  ],
  "outcomes": [
    {
      "level": "Understand",
      "text": "Dualbildung (max↔min), ökonomische Bedeutung der Dualvariablen (Schattenpreise)."
    },
    {
      "level": "Apply",
      "text": "Komplementäre Schlupfbedingungen prüfen; zulässige Dual‑Lösung aus Primaler Lösung ableiten."
    },
    {
      "level": "Analyze",
      "text": "Sensitivität: RHS‑Änderungen (b_i) und Zielfunktionskoeffizienten (c_j); reduzierte Kosten interpretieren."
    }
  ],
  "blocks": [
    {
      "type": "introduction",
      "text": "Jedes LP hat ein **Dualproblem**. Dualvariablen sind **Schattenpreise** deiner Ressourcen. \nDu lernst, Duale zu bilden, **komplementäre Schlupfbedingungen** anzuwenden und einfache **Sensitivitätsanalysen** zu interpretieren."
    },
    {
      "type": "concept",
      "title": "Dualbildung (Schema)",
      "text": "Primal (max):  max cᵗx  s.t.  Ax ≤ b, x≥0  \nDual (min):    min bᵗy  s.t.  Aᵗy ≥ c, y≥0  \n(Bei ≥ oder = ändern sich Vorzeichen/Zeichen der y‑Bedingungen entsprechend.)  \n**Schwache/ Starke Dualität**: z_P ≤ z_D; bei Optimalität z_P = z_D.",
      "explanation": "\n\n**Decision-Hints:**\n- Kettenrabatt niemals addieren: immer Faktoren multiplizieren.\n- Skonto auf den bereits rabattierten Preis anwenden."
    },
    {
      "type": "derivation",
      "title": "Komplementäre Schlupfbedingungen",
      "steps": [
        "Für jede Primal‑Restriktion i:  y_i · (b_i − a_i x) = 0.",
        "Für jede Dual‑Restriktion j:  x_j · ( (Aᵗ y − c)_j ) = 0.",
        "Interpretation: Entweder Ressource ist **bindend** (kein Schlupf) und Schattenpreis > 0, oder Preis = 0 und Schlupf > 0."
      ],
      "comment": "Hilft, Dualvariablen aus einer primalen Ecke zu bestimmen."
    },
    {
      "type": "visual",
      "title": "ASCII – Bindung & Preis",
      "ascii": "Ressource bindet?  ──► y>0\nRessource locker?  ──► y=0",
      "caption": "Schattenpreise nur für bindende Engpässe.",
      "alt_text": "ASCII-Visual: Schattenpreise nur für bindende Engpässe. — Achsen x/y, Einheiten und Legende beachten."
    },
    {
      "type": "example",
      "subtype": "worked",
      "title": "Worked – Schattenpreise im Produktmix",
      "text": "Aus M06L01: 2x_A + x_B ≤ 4 (Maschine), 3x_A + 2x_B ≤ 6 (Material). Optimum lag auf der Kante zwischen (0,3) und (2,0).  \nBei (0,3) ist Maschine **locker** (2·0+1·3=3<4), Material **bindend** (3·0+2·3=6) ⇒ y_Maschine=0, y_Material>0.  \nSetze Aᵗy=c mit Bindung: 2y_M + 3y_Mat ≥ 30; 1y_M + 2y_Mat ≥ 20 und für bindende Nebenbed. als Gleichung.  \nEine zulässige Lösung ist y_M=0, y_Mat=€ 10/kg (prüfe: 1·0+2·10=20; 2·0+3·10=30). **Deutung**: +1 kg Material erhöht z um € 10,-",
      "steps": [
        "Aus M06L01: 2x_A + x_B ≤ 4 (Maschine), 3x_A + 2x_B ≤ 6 (Material). Optimum lag auf der Kante zwischen (0,3) und (2,",
        "Bei (0,3) ist Maschine **locker** (2·0+1·3=3<4), Material **bindend** (3·0+2·3=6) → y_Maschine=0, y_Material>",
        "Setze Aᵗy=c mit Bindung: 2y_M + 3y_Mat ≥ 30; 1y_M + 2y_Mat ≥ 20 und für bindende Nebenbed. als Gleichung",
        "Eine zulässige Lösung ist y_M=0, y_Mat=€ 10/kg (prüfe: 1·0+2·10=20; 2·0+3·10=30). **Deutung**: +1 kg Material erhöht z um € 10,"
      ]
    },
    {
      "type": "example",
      "subtype": "fading",
      "title": "Fading – Dual bilden & interpretieren",
      "text": "Primal (max): z=25x₁+20x₂; 2x₁+x₂≤8; x₁+2x₂≤8; x≥0.  \na) Dual angeben.  \nb) Nutze komplementäre Schlupfbedingungen bei Optimum.  \nc) Deute y₁,y₂ (€/Einheit Ressource).",
      "solution": [
        "min 8y₁+8y₂ s.t. 2y₁+y₂ ≥ 25; y₁+2y₂ ≥ 20; y≥0",
        "Bindende Nebenbedingungen → entsprechende y>0.",
        "y interpretiert als Grenzwert der Ressourcen."
      ],
      "steps": [
        "Primal (max): z=25x₁+20x₂; 2x₁+x₂≤8; x₁+2x₂≤8; x≥",
        "a) Dual angeben",
        "b) Nutze komplementäre Schlupfbedingungen bei Optimum",
        "c) Deute y₁,y₂ (€/Einheit Ressource"
      ]
    },
    {
      "type": "exercises",
      "mini": [
        {
          "prompt": "Starke Dualität bedeutet…",
          "hint": "z_P=z_D bei Optimalität",
          "solution": "gleich",
          "check": {
            "type": "string_contains",
            "expected": "z_P"
          },
          "difficulty": "leicht"
        },
        {
          "prompt": "Wann ist ein Schattenpreis 0?",
          "hint": "bei lockerer Restriktion",
          "solution": "kein Engpass",
          "check": {
            "type": "string_contains",
            "expected": "locker"
          },
          "difficulty": "leicht"
        },
        {
          "prompt": "Reduzierte Kosten r_j…",
          "hint": "= c_j − (Aᵗy)_j",
          "solution": "≤0 im Optimum (max)",
          "check": {
            "type": "string_contains",
            "expected": "c_j"
          },
          "difficulty": "leicht"
        },
        {
          "prompt": "Formuliere die Rabattkette in Faktorform (Textantwort).",
          "solution": "P_netto = P0 · ∏(1−r_k) · (1−s)",
          "check": {
            "type": "string_contains",
            "expected": "1−"
          },
          "covers_outcomes": [
            0
          ],
          "difficulty": "mittel"
        },
        {
          "prompt": "Formuliere die Rabattkette in Faktorform (Textantwort).",
          "solution": "P_netto = P0 · ∏(1−r_k) · (1−s)",
          "check": {
            "type": "string_contains",
            "expected": "1−"
          },
          "covers_outcomes": [
            1
          ],
          "difficulty": "mittel"
        },
        {
          "prompt": "Formuliere die Rabattkette in Faktorform (Textantwort).",
          "solution": "P_netto = P0 · ∏(1−r_k) · (1−s)",
          "check": {
            "type": "string_contains",
            "expected": "1−"
          },
          "covers_outcomes": [
            2
          ],
          "difficulty": "mittel"
        }
      ],
      "long": [
        {
          "title": "Praxis – Sensitiv auf RHS (b)",
          "context": "Opt. Lösung bekannt. Erhöhe Kapazität b₁ um Δ. Wie verändert sich z?",
          "subtasks": [
            {
              "text": "Nutze Schattenpreis y₁."
            },
            {
              "text": "Gilt nur innerhalb zulässigen Bereichs."
            },
            {
              "text": "Zeige Beispiel mit Δ=1,2,3."
            }
          ],
          "hints": [
            "Δz≈y₁·Δ, bis Basis wechselt.",
            "Grenzen aus Sensitivitätsbericht ablesen.",
            "Tabelle Δ vs. Δz."
          ],
          "solutions": [
            "Δz skizziert",
            "Bereich erklärt",
            "Interpretation"
          ],
          "checks": [
            {
              "type": "free_form",
              "keywords": [
                "Schattenpreis",
                "RHS",
                "Sensitivität"
              ]
            }
          ],
          "difficulty": "leicht",
          "steps": [
            "Δz skizziert",
            "Bereich erklärt",
            "Interpretation"
          ]
        }
      ]
    },
    {
      "type": "common_mistakes",
      "items": [
        "Dual falsch (Zeichen/Transponieren verwechselt).",
        "Schattenpreise auf nicht bindende Restriktionen interpretiert.",
        "Reduzierte Kosten mit Deckungsbeiträgen verwechselt."
      ]
    },
    {
      "type": "quiz",
      "items": [
        {
          "type": "single_choice",
          "question": "Dual zu max cᵗx s.t. Ax≤b, x≥0?",
          "options": [
            "min bᵗy s.t. Aᵗy≥c, y≥0",
            "min bᵗy s.t. Aᵗy≤c",
            "max bᵗy s.t. Aᵗy≥c"
          ],
          "answer_index": 0,
          "rationale": "Schema.",
          "difficulty": "leicht",
          "feedback_correct": "Richtig. Schema.",
          "feedback_incorrect": "Beachte: Faktorrechnung bei Kettenrabatten; Skonto nach Rabatt anwenden."
        },
        {
          "type": "true_false",
          "question": "y_i>0 nur, wenn Restriktion i bindet.",
          "answer": true,
          "rationale": "Komplementarität.",
          "difficulty": "leicht",
          "feedback_correct": "Richtig. Komplementarität.",
          "feedback_incorrect": "Beachte: Faktorrechnung bei Kettenrabatten; Skonto nach Rabatt anwenden."
        },
        {
          "type": "single_choice",
          "question": "Reduzierte Kosten r_j im Optimum (max)…",
          "options": [
            ">0",
            "=0 für Basis, ≤0 für Nichtbasis",
            "<0 für Basis"
          ],
          "answer_index": 1,
          "rationale": "Kriterium.",
          "difficulty": "leicht",
          "feedback_correct": "Richtig. Kriterium.",
          "feedback_incorrect": "Beachte: Faktorrechnung bei Kettenrabatten; Skonto nach Rabatt anwenden."
        },
        {
          "type": "true_false",
          "question": "Kettenrabatte werden addiert.",
          "answer": false,
          "rationale": "Rabatte als Faktoren multiplizieren; nicht addieren.",
          "covers_outcomes": [
            0
          ],
          "difficulty": "mittel",
          "feedback_correct": "Richtig. Rabatte als Faktoren multiplizieren; nicht addieren.",
          "feedback_incorrect": "Beachte: Faktorrechnung bei Kettenrabatten; Skonto nach Rabatt anwenden."
        },
        {
          "type": "true_false",
          "question": "Skonto wird auf den bereits rabattierten Preis angewendet.",
          "answer": true,
          "rationale": "Reihenfolge: Rabatt(e) → Skonto (auf den rabattierten Preis).",
          "covers_outcomes": [
            1
          ],
          "difficulty": "mittel",
          "feedback_correct": "Richtig. Reihenfolge: Rabatt(e) → Skonto (auf den rabattierten Preis).",
          "feedback_incorrect": "Beachte: Faktorrechnung bei Kettenrabatten; Skonto nach Rabatt anwenden."
        },
        {
          "type": "true_false",
          "question": "Kettenrabatte werden addiert.",
          "answer": false,
          "rationale": "Rabatte als Faktoren multiplizieren; nicht addieren.",
          "covers_outcomes": [
            2
          ],
          "difficulty": "mittel",
          "feedback_correct": "Richtig. Rabatte als Faktoren multiplizieren; nicht addieren.",
          "feedback_incorrect": "Beachte: Faktorrechnung bei Kettenrabatten; Skonto nach Rabatt anwenden."
        }
      ]
    },
    {
      "type": "summary",
      "text": "Du bildest Duale, liest Schattenpreise und interpretierst Sensitivität (RHS/c)."
    },
    {
      "type": "outlook",
      "text": "Als Nächstes: **Anwendungen** – Transport, Zuordnung, Blending, Produktionsplanung."
    }
  ],
  "reading_time_band": "gründlich"
}